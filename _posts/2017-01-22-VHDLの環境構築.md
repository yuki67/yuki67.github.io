---
title: "VHDLの環境構築"
categories: VHDL
---

# VHDLの環境構築

学校の課題でVHDLを書きました。

そのためにQurtus PrimeをインストールしてQuartusとModelSimを使ったのですが、動作が遅かったり文字やボタンが小さかったりウィンドウを頻繁に切り替えたりする必要があったりと、とにかくストレスが溜まりました。

そこでVHDLファイルのシミュレーション/コンパイル環境を整えました。結構うまくできたと思うので書いておきます。

以下で説明することはQurtus Primeが必要なので、Qurtus PrimeがインストールできないMacではできません。またLinuxでの動作確認もしてません。

## 何ができるか

- VHDLファイルをVisual Studio Codeで編集
- キーボードショートカットでVHDLファイルをコンパイル/シミュレート
- コンパイルエラーを一覧で表示し、エディタ上で赤線で強調
- ModelSimのGUIからボタン一つでシミュレーションの結果をロード

## 前提条件

- [Quartus Prime Lite Edition](https://www.altera.co.jp/products/design-software/fpga-design/quartus-prime/download.html)がインストールされている
- ```vlib``` , ```vcom``` , ```vsim``` へのパスが通っている (コマンドラインから実行できる)
- [Visual Studio Code](https://code.visualstudio.com/)がインストールされている

簡単にできると思うので省略します。


## 準備

- ソースを[リポジトリ](https://github.com/yuki67/VSCodeProjectTemplate_VHDL:embed:cite)
からダウンロードする
- ダウンロードしたフォルダでコマンド ```vlib work``` を実行
- ダウンロードしたフォルダでVisual Studio Code を開く
- VHDLファイルにコメントでコンパイルとシミュレーションの方法が書いてあるのでそれに従う

Visual Studio Codeには[VHDL用の拡張機能](https://marketplace.visualstudio.com/items?itemName=mshr-h.VHDL)があるので、それをインストールすることもお勧めします。

## 作業の流れ

- Visual Studio CodeでVHDLファイルを編集する
- キーボードショートカットでコンパイルする
- エラーが出たら、キーボードショートカットで一覧を出して確認し、修正
- エラーが無かったら、キーボードショートカットでテストベンチを走らせる
- ModelSimの画面からReloadボタンを押す
- シミュレーションがうまくいったら、Quartusの画面からフルコンパイル
